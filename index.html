<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tber Scales Viewer</title>
  <style>
    body {
      font-family: sans-serif;
      background: #f0f0f0;
      padding: 30px;
      text-align: center;
    }
    .selector-box select {
      padding: 10px 15px;
      font-size: 1rem;
      margin: 10px;
    }
    .section {
      margin-top: 30px;
      padding: 20px;
      background: white;
      display: inline-block;
      border-radius: 10px;
      box-shadow: 0 0 8px rgba(0,0,0,0.1);
    }
    .fretboard-img {
      width: 70%;
      height: auto;
    }
    .notes {
      font-size: 1.4rem;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <h1>Tber scales</h1>

  <div class="selector-box">
    <select id="key" onchange="updateScales(); updateImage(); updateNotes();">
      <option value="C">C</option><option value="C#">C#</option><option value="D">D</option><option value="D#">D#</option><option value="E">E</option><option value="F">F</option><option value="F#">F#</option><option value="G">G</option><option value="G#">G#</option><option value="A">A</option><option value="A#">A#</option><option value="B">B</option>
    </select>

    <select id="genre" onchange="updateScales(); updateImage(); updateNotes();">
      <option value="major">メジャー</option>
      <option value="minor">マイナー</option>
      <option value="mode">モード</option>
    </select>

    <select id="scale" onchange="updateImage(); updateNotes();">
      <!-- 自動更新 -->
    </select>
  </div>

  <div class="section">
    <h2>構成音</h2>
    <p class="notes" id="noteDisplay">C, D, E, F, G, A, B</p>
  </div>

  <div class="section">
    <h2>指板</h2>
    <img id="fretboard" src="c_メジャー_fretboard.png" alt="スケール指板画像" class="fretboard-img" />
  </div>

  <script>
    const scaleSelect = document.getElementById("scale");
    const genreSelect = document.getElementById("genre");
    const fretboardImg = document.getElementById("fretboard");
    const noteDisplay = document.getElementById("noteDisplay");

    const scales = {
      major: ["メジャー", "ペンタ", "ブルース"],
      minor: ["ナチュラル", "メロディック", "ハーモニック", "ペンタ", "ブルース"],
      mode: ["アイオニアン", "ドリアン", "フリジアン", "リディアン", "ミクソリディアン", "エオリアン", "ロクリアン"]
    };

    const filenameKeyMap = {
      "C": "c", "C#": "c_sharp", "D": "d", "D#": "d_sharp", "E": "e",
      "F": "f", "F#": "f_sharp", "G": "g", "G#": "g_sharp", "A": "a",
      "A#": "a_sharp", "B": "b"
    };

    const scaleNotesMapMajor = {
      "C": ["C, D, E, F, G, A, B"], "C#": ["C♯, D♯, F, F♯, G♯, A♯, C"], "D": ["D, E, F♯, G, A, B, C♯"], "D#": ["D♯, F, G, G♯, A♯, C, D"], "E": ["E, F♯, G♯, A, B, C♯, D♯"], "F": ["F, G, A, A♯, C, D, E"], "F#": ["F♯, G♯, A♯, B, C♯, D♯, F"], "G": ["G, A, B, C, D, E, F♯"], "G#": ["G♯, A♯, C, C♯, D♯, F, G"], "A": ["A, B, C♯, D, E, F♯, G♯"], "A#": ["A♯, C, D, D♯, F, G, A"], "B": ["B, C♯, D♯, E, F♯, G♯, A♯"]
    };

    const scaleNotesMapMinor = {
  "C": ["C, D, D♯, F, G, G♯, A♯"],
  "C#": ["C♯, D♯, E, F♯, G♯, A, B"],
  "D": ["D, E, F, G, A, A♯, C"],
  "D#": ["D♯, F, F♯, G♯, A♯, B, C♯"],
  "E": ["E, F♯, G, A, B, C, D"],
  "F": ["F, G, G♯, A♯, C, C♯, D♯"],
  "F#": ["F♯, G♯, A, B, C♯, D, E"],
  "G": ["G, A, A♯, C, D, D♯, F"],
  "G#": ["G♯, A♯, B, C♯, D♯, E, F♯"],
  "A": ["A, B, C, D, E, F, G"],
  "A#": ["A♯, C, C♯, D♯, F, F♯, G♯"],
  "B": ["B, C♯, D, E, F♯, G, A"]
};

    function updateScales() {
      const key = document.getElementById("key").value;
      const genre = genreSelect.value;

      const selectedGenre = genreSelect.value;
      scaleSelect.innerHTML = "";
      scales[selectedGenre].forEach(scale => {
      if (scale === "メジャー" || scale === "ナチュラル") {
        scaleSelect.value = scale;
      }

        const opt = document.createElement("option");
        opt.value = scale;
        opt.textContent = scale;
        scaleSelect.appendChild(opt);
      });
    }

    
    function updateImage() {
      const key = document.getElementById("key").value;
      const scale = scaleSelect.value;
      const genre = genreSelect.value;
      const filenameKey = filenameKeyMap[key];

      let filename = "";
      if (genre === "major" && scale === "メジャー") {
        filename = `${filenameKey}_メジャー_fretboard.png`;
      } else if (genre === "major" && scale === "ペンタ") {
        filename = `${filenameKey}_Mペンタ_fretboard.png`;
      } else if (genre === "minor" && scale === "ナチュラル") {
        filename = `${filenameKey}_ナチュラル_fretboard.png`;
      } else if (genre === "minor" && scale === "ペンタ") {
        filename = `${filenameKey}_mペンタ_fretboard.png`;
      } else {
        filename = "";
      }
      fretboardImg.src = filename;
    }

      const key = document.getElementById("key").value;
      const scale = scaleSelect.value;
      const genre = genreSelect.value;
      const filenameKey = filenameKeyMap[key];

      if (genre === "major" && scale === "メジャー") {
        noteDisplay.textContent = scaleNotesMapMajor[key].join(", ");
    } else if (genre === "major" && scale === "ペンタ") {
        noteDisplay.textContent = scaleNotesMapMajorPenta[key].join(", ");
        fretboardImg.src = `${filenameKey}_メジャー_fretboard.png`;
    } else if (genre === "major" && scale === "ペンタ") {
        fretboardImg.src = `${filenameKey}_Mペンタ_fretboard.png`;
        fretboardImg.src = `${filenameKey}_メジャー_fretboard.png`;
      } else if (genre === "minor" && scale === "ナチュラル") {
        noteDisplay.textContent = scaleNotesMapMinor[key].join(", ");
    } else if (genre === "minor" && scale === "ペンタ") {
        noteDisplay.textContent = scaleNotesMapMinorPenta[key].join(", ");
        fretboardImg.src = `${filenameKey}_ナチュラル_fretboard.png`;
    } else if (genre === "minor" && scale === "ペンタ") {
        fretboardImg.src = `${filenameKey}_Mペンタ_fretboard.png`;
        fretboardImg.src = `${filenameKey}_ナチュラル_fretboard.png`;
      } else {
        fretboardImg.src = "";
      }
    }

    function updateNotes() {
      const key = document.getElementById("key").value;
      const genre = genreSelect.value;
      const scale = scaleSelect.value;

      if (genre === "major" && scale === "メジャー") {
        noteDisplay.textContent = scaleNotesMapMajor[key].join(", ");
    } else if (genre === "major" && scale === "ペンタ") {
        noteDisplay.textContent = scaleNotesMapMajorPenta[key].join(", ");
        fretboardImg.src = `${filenameKey}_メジャー_fretboard.png`;
    } else if (genre === "major" && scale === "ペンタ") {
        fretboardImg.src = `${filenameKey}_Mペンタ_fretboard.png`;
        noteDisplay.textContent = scaleNotesMapMajor[key].join(", ");
      } else if (genre === "minor" && scale === "ナチュラル") {
        noteDisplay.textContent = scaleNotesMapMinor[key].join(", ");
    } else if (genre === "minor" && scale === "ペンタ") {
        noteDisplay.textContent = scaleNotesMapMinorPenta[key].join(", ");
        fretboardImg.src = `${filenameKey}_ナチュラル_fretboard.png`;
    } else if (genre === "minor" && scale === "ペンタ") {
        fretboardImg.src = `${filenameKey}_Mペンタ_fretboard.png`;
        noteDisplay.textContent = scaleNotesMapMinor[key].join(", ");
      } else {
        noteDisplay.textContent = "（未対応）";
      }
    }

    genreSelect.value = "major";
    updateScales();
    scaleSelect.value = "メジャー";
    updateImage();
    updateNotes();
  
const scaleNotesMapMajorPenta = {
  "C": ["C, D, E, G, A"],
  "C#": ["C♯, D♯, F, G♯, A♯"],
  "D": ["D, E, F♯, A, B"],
  "D#": ["D♯, F, G, A♯, C"],
  "E": ["E, F♯, G♯, B, C♯"],
  "F": ["F, G, A, C, D"],
  "F#": ["F♯, G♯, A♯, C♯, D♯"],
  "G": ["G, A, B, D, E"],
  "G#": ["G♯, A♯, C, D♯, F"],
  "A": ["A, B, C♯, E, F♯"],
  "A#": ["A♯, C, D, F, G"],
  "B": ["B, C♯, D♯, F♯, G♯"]
};

const scaleNotesMapMinorPenta = {
  "C": ["C, D♯, F, G, A♯"],
  "C#": ["C♯, E, F♯, G♯, B"],
  "D": ["D, F, G, A, C"],
  "D#": ["D♯, F♯, G♯, A♯, C♯"],
  "E": ["E, G, A, B, D"],
  "F": ["F, G♯, A♯, C, D♯"],
  "F#": ["F♯, A, B, C♯, E"],
  "G": ["G, A♯, C, D, F"],
  "G#": ["G♯, B, C♯, D♯, F♯"],
  "A": ["A, C, D, E, G"],
  "A#": ["A♯, C♯, D♯, F, G♯"],
  "B": ["B, D, E, F♯, A"]
};

</script>
</body>
</html>
